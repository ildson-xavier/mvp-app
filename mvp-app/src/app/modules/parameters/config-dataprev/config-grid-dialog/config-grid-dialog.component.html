<div class="container">
    <mat-toolbar color="primary">
        <span class="fill-remaining-space"></span>
        <span class="title"> Grade Horária de Indisponibilidade</span>
        <span class="fill-remaining-space"></span>
    </mat-toolbar>
    <div class="content-panel">
            <div mat-dialog-content>
                <form [formGroup]="form" (ngSubmit)="submit()">
<!--                     <mat-label>Favorite Animal</mat-label>
                    <input matInput [(ngModel)]="data.animal"> -->

                    <div class="example-container">
<!-- 
                            <input matInput [matDatepicker]="id" hidden="true"  formControlName="id">
                        <div *ngIf="form.value.id == 38">
                            achou
                        </div> -->
                        <mat-form-field appearance="legacy" class="data-hora">
                            <mat-label>Data de Início</mat-label>
                             <input matInput appDateMask  formControlName="dtBegin" minlength="10">
                             
<!--                             <input matInput [matDatepicker]="dtBegin"  formControlName="dtBegin">
                            <mat-datepicker-toggle matSuffix [for]="dtBegin"></mat-datepicker-toggle>
                            <mat-datepicker #dtBegin  color="primary"></mat-datepicker> -->

                        </mat-form-field>
                        
                        <mat-form-field  appearance="legacy" class="data-hora">
                            <mat-label>Hora de Início</mat-label>
                            <input matInput appTimeMask  formControlName="hrBegin" minlength="6">
                        </mat-form-field>

                        <mat-form-field appearance="legacy" class="data-hora">
                            <mat-label>Data Fim</mat-label>
                            <input matInput appDateMask  formControlName="dtEnd" minlength="10">
                        </mat-form-field>
                        
                        <mat-form-field appearance="legacy" class="data-hora">
                            <mat-label>Hora Fim</mat-label>
                            <input matInput appTimeMask  formControlName="hrEnd" minlength="6">
                        </mat-form-field>

                        <mat-form-field appearance="legacy" class="reason">
                            <mat-label>Motivo</mat-label>
                            <input matInput  formControlName="dsReason" maxlength="100">
                        </mat-form-field>
                        
                        <button [disabled]="!form.valid" *ngIf="!form.value.id" mat-raised-button color="primary">Incluir</button>
                        <button  *ngIf="form.value.id" mat-raised-button color="primary">Atualizar</button>
                        <button  *ngIf="form.value.id" mat-raised-button color="accept" (click)="cancel()">Cancelar</button>
                        
                    </div>
                </form>
                    <div>

                        <table mat-table [dataSource]="unavailabilitySchedules" class="mat-elevation-z8">
                            
                            <!-- Position Column -->
                            <ng-container matColumnDef="dtBegin">
                                <th mat-header-cell *matHeaderCellDef class="header-color"> Data de Início </th>
                                <td mat-cell *matCellDef="let unavailabilitySchedule"> {{unavailabilitySchedule.dtBegin | date: 'dd/MM/yyyy'}} </td>
                            </ng-container>
                            
                            <!-- Name Column -->
                            <ng-container matColumnDef="hrBegin">
                                <th mat-header-cell *matHeaderCellDef class="header-color"> Hora de Início </th>
                                <td mat-cell *matCellDef="let unavailabilitySchedule"> {{unavailabilitySchedule.hrBegin}} </td>
                            </ng-container>
                            
                            <!-- Weight Column -->
                            <ng-container matColumnDef="dtEnd">
                                <th mat-header-cell *matHeaderCellDef class="header-color"> Data Fim </th>
                                <td mat-cell *matCellDef="let unavailabilitySchedule"> {{unavailabilitySchedule.dtEnd | date: 'dd/MM/yyyy'}} </td>
                            </ng-container>
                            
                            <!-- Symbol Column -->
                            <ng-container matColumnDef="hrEnd">
                                <th mat-header-cell *matHeaderCellDef class="header-color"> Hora Fim </th>
                                <td mat-cell *matCellDef="let unavailabilitySchedule"> {{unavailabilitySchedule.hrEnd}} </td>
                            </ng-container>
                            
                            <!-- Symbol Column -->
                            <ng-container matColumnDef="dsReason">
                                <th mat-header-cell *matHeaderCellDef class="header-color"> Motivo </th>
                                <td mat-cell *matCellDef="let unavailabilitySchedule"> {{unavailabilitySchedule.dsReason}} </td>
                            </ng-container>

                            <ng-container matColumnDef="actions" style="width: 100px;">
                                <th mat-header-cell *matHeaderCellDef class="header-color"> Ações </th>
                                <td mat-cell *matCellDef="let row"> 
                                    <button mat-button color="warn" (click)="delete(row)">
                                        Excluir
                                    </button>
                                    <button mat-button color="primary" (click)="loadForUpdate(row)">
                                        Alterar
                                    </button>
                                </td>
                                
                            </ng-container>

                            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns;"
                                (click)="selection.toggle(row)">
                            </tr>
                            
                        </table>
                    </div>
                    

                
                </div>
            <div mat-dialog-actions class="button-positon">
                <button mat-raised-button color="primary" (click)="onNoClick()">Atualizar</button>
                <button mat-raised-button color="accept" [mat-dialog-close]="data.name" cdkFocusInitial>Fechar</button>
            </div>
    </div>
</div>
